# 🧪 Tauri 项目完整测试指南

**项目**: 熔盐管理文件上传工具 - Tauri 版本  
**测试日期**: 2025-10-24  
**状态**: 准备测试

---

## 📋 测试概览

本文档提供完整的测试计划，包括：

- ✅ 环境验证
- ✅ 构建测试
- ✅ 功能测试
- ✅ 性能测试
- ✅ UI/UX 测试
- ✅ 跨平台测试

---

## 🔧 第一阶段: 环境验证

### 1.1 检查必要工具

```bash
# 检查 Rust
rustc --version
cargo --version

# 检查 Node.js
node --version
npm --version

# 检查项目文件
ls -la /Users/yyz/Desktop/熔盐管理文件上传工具/tauri-app/
```

**预期输出:**

- Rust 1.70+
- Node.js 18+
- npm 8+
- 所有项目文件存在

### 1.2 验证依赖安装

```bash
cd /Users/yyz/Desktop/熔盐管理文件上传工具/tauri-app

# 检查 npm 依赖
npm list

# 预期输出: 所有依赖已安装，无错误
```

### 1.3 验证 Rust 编译环境

```bash
cd /Users/yyz/Desktop/熔盐管理文件上传工具/tauri-app/src-tauri

# 检查编译环境
cargo check

# 预期: 编译成功，无错误
```

---

## 🏗️ 第二阶段: 构建测试

### 2.1 前端构建

```bash
cd /Users/yyz/Desktop/熔盐管理文件上传工具/tauri-app

# 构建前端
npm run build

# 检查输出
ls -la dist/
```

**预期结果:**

- ✅ 构建完成，无错误
- ✅ `dist/` 目录生成
- ✅ HTML、CSS、JS 文件存在
- ✅ 文件大小合理 (<5MB)

### 2.2 后端编译

```bash
cd /Users/yyz/Desktop/熔盐管理文件上传工具/tauri-app/src-tauri

# 完整编译
cargo build --release

# 检查输出
ls -la target/release/
```

**预期结果:**

- ✅ 编译完成，无错误
- ✅ 生成可执行文件
- ✅ 编译时间 < 5 分钟

### 2.3 完整打包测试

```bash
cd /Users/yyz/Desktop/熔盐管理文件上传工具/tauri-app

# 打包所有平台
npm run tauri:build

# 检查输出目录
ls -la src-tauri/target/release/bundle/
```

**预期结果:**

- ✅ 生成平台特定包
- ✅ macOS: .dmg 文件
- ✅ Windows: .msi 文件
- ✅ Linux: .deb 文件

---

## 🎮 第三阶段: 功能测试

### 3.1 启动应用

```bash
cd /Users/yyz/Desktop/熔盐管理文件上传工具/tauri-app

# 启动开发模式
npm run dev
```

**预期结果:**

- ✅ Vite 服务器启动 (端口 5173)
- ✅ Rust 后端编译
- ✅ Tauri 窗口打开
- ✅ 显示登录页面

### 3.2 登录测试

| 步骤 | 操作              | 预期结果                     |
| ---- | ----------------- | ---------------------------- |
| 1    | 输入 API 地址     | 字段接受输入                 |
| 2    | 输入用户名/手机号 | 字段接受输入                 |
| 3    | 输入密码          | 密码正确隐藏                 |
| 4    | 点击登录          | 按钮禁用，显示"登录中..."    |
| 5    | 等待响应          | 收到成功或错误消息           |
| 6    | 成功登录          | 跳转到上传页面，显示用户信息 |

**测试用例:**

```
测试 1: 有效登录
- API: http://localhost:3000
- 用户名: test_user
- 密码: test_password
- 预期: 登录成功

测试 2: 无效用户名
- API: http://localhost:3000
- 用户名: invalid_user
- 密码: test_password
- 预期: 显示错误消息

测试 3: 空密码
- API: http://localhost:3000
- 用户名: test_user
- 密码: (空)
- 预期: 显示"请输入密码"错误

测试 4: 无效 API
- API: http://invalid-api.com
- 用户名: test_user
- 密码: test_password
- 预期: 显示网络错误消息

测试 5: 手机号登录
- API: http://localhost:3000
- 用户名: 13800138000
- 密码: test_password
- 预期: 登录成功
```

### 3.3 项目查询测试

| 步骤 | 操作         | 预期结果               |
| ---- | ------------ | ---------------------- |
| 1    | 登录成功     | 页面加载项目信息       |
| 2    | 查看项目信息 | 显示项目名称、状态、ID |
| 3    | 验证数据     | 项目信息与后端一致     |

### 3.4 文件上传测试

| 步骤 | 操作            | 预期结果                    |
| ---- | --------------- | --------------------------- |
| 1    | 点击"选择文件"  | 打开文件选择对话框          |
| 2    | 选择 Excel 文件 | 显示文件路径                |
| 3    | 点击"开始上传"  | 进度条显示，按钮禁用        |
| 4    | 等待上传        | 进度条动画，显示"上传中..." |
| 5    | 上传完成        | 显示成功消息，进度条 100%   |

**测试文件:**

```
文件: assets/淮安日报2025.10.19.xlsx
格式: Excel (.xlsx)
大小: < 10MB
内容: 日报数据
```

**上传测试用例:**

```
测试 1: 有效文件上传
- 文件: 有效的 Excel 文件
- 预期: 上传成功，显示"✅ 上传成功"

测试 2: 无文件选择
- 操作: 不选择文件直接上传
- 预期: 显示错误"❌ 请先选择文件"

测试 3: 无效文件类型
- 文件: .txt 文件
- 预期: 上传失败，显示错误

测试 4: 大文件上传
- 文件: 100MB 文件
- 预期: 显示文件太大错误或正常处理

测试 5: 上传中断
- 操作: 上传中关闭窗口
- 预期: 优雅处理中断
```

### 3.5 退出功能测试

| 步骤 | 操作           | 预期结果              |
| ---- | -------------- | --------------------- |
| 1    | 点击"退出"按钮 | 返回登录页面          |
| 2    | 验证状态       | 清除 token 和用户信息 |
| 3    | 再次登录       | 可正常登录            |

---

## 🎨 第四阶段: UI/UX 测试

### 4.1 响应式设计测试

| 屏幕尺寸  | 测试项目 | 预期结果   |
| --------- | -------- | ---------- |
| 1920x1080 | 桌面显示 | 完美布局   |
| 1366x768  | 笔记本   | 正常显示   |
| 800x600   | 小屏幕   | 响应式调整 |
| 400x600   | 手机竖屏 | 移动适配   |

### 4.2 样式测试

**检查项:**

- [ ] 背景颜色 (梯度紫色)
- [ ] 卡片圆角和阴影
- [ ] 按钮样式和悬停效果
- [ ] 输入框焦点状态
- [ ] 错误消息样式
- [ ] 进度条显示
- [ ] 文字清晰度
- [ ] 中文字体支持

### 4.3 交互测试

**检查项:**

- [ ] 按钮点击响应灵敏
- [ ] 输入字段可输入
- [ ] 回车键提交表单
- [ ] 焦点管理正确
- [ ] 加载状态显示
- [ ] 错误提示清晰
- [ ] 消息自动消失时间合理

### 4.4 可访问性测试

**检查项:**

- [ ] 按钮有明确标签
- [ ] 输入框有 placeholder
- [ ] 颜色对比度足够
- [ ] 键盘导航可用
- [ ] 屏幕阅读器兼容

---

## ⚡ 第五阶段: 性能测试

### 5.1 启动性能

```bash
# 测试应用启动时间
time npm run tauri:dev

# 预期: < 5 秒
```

### 5.2 内存占用

**方法:**

1. 启动应用
2. 打开系统监视器/任务管理器
3. 查看内存占用

**预期:**

- 初始: < 100MB
- 登录后: < 150MB
- 上传中: < 200MB

### 5.3 响应时间

| 操作     | 预期响应时间 |
| -------- | ------------ |
| 登录请求 | < 3 秒       |
| 项目查询 | < 2 秒       |
| 文件选择 | < 1 秒       |
| 上传启动 | < 1 秒       |

### 5.4 热加载性能

```bash
# 修改代码后检查热加载时间
# 预期: < 2 秒
```

---

## 🔀 第六阶段: 跨平台测试

### 6.1 macOS 测试

```bash
# 在 macOS 上运行
npm run tauri:build

# 测试 .dmg 安装包
# 预期:
# - 安装成功
# - 应用正常运行
# - 所有功能可用
```

### 6.2 Windows 测试 (如可用)

```bash
# 在 Windows 上运行
npm run tauri:build

# 测试 .msi 安装包
# 预期:
# - 安装成功
# - 应用正常运行
# - 路径支持中文
```

### 6.3 Linux 测试 (如可用)

```bash
# 在 Linux 上运行
npm run tauri:build

# 测试 .deb 安装包
# 预期:
# - 安装成功
# - 应用正常运行
# - 字体显示正确
```

---

## 🐛 第七阶段: 错误处理测试

### 7.1 网络错误处理

| 场景     | 操作         | 预期结果           |
| -------- | ------------ | ------------------ |
| 网络断开 | 登录时断网   | 显示"网络请求失败" |
| 超时     | API 响应慢   | 显示超时错误       |
| 无效 API | 输入错误地址 | 显示连接失败       |

### 7.2 文件错误处理

| 场景       | 操作              | 预期结果           |
| ---------- | ----------------- | ------------------ |
| 文件不存在 | 选择已删除文件    | 显示文件不存在错误 |
| 权限不足   | 选择无读权限文件  | 显示权限错误       |
| 格式错误   | 上传非 Excel 文件 | 显示格式错误       |

### 7.3 API 错误处理

| 场景             | 操作       | 预期结果               |
| ---------------- | ---------- | ---------------------- |
| 401 Unauthorized | token 过期 | 显示登录过期，重新登录 |
| 403 Forbidden    | 无权限     | 显示权限不足           |
| 500 Server Error | 服务器错误 | 显示服务器错误         |
| 429 Too Many     | 限流       | 显示请求过于频繁       |

---

## 📊 第八阶段: 回归测试清单

在发布前完成以下所有测试:

### 基础功能

- [ ] 应用启动正常
- [ ] 登录页面显示
- [ ] 登录功能工作
- [ ] 上传页面显示
- [ ] 文件选择工作
- [ ] 文件上传工作
- [ ] 退出功能工作

### 用户界面

- [ ] 界面美观
- [ ] 文本清晰
- [ ] 按钮可点击
- [ ] 响应式设计
- [ ] 动画流畅

### 功能完整性

- [ ] 登录成功率 100%
- [ ] 错误提示正确
- [ ] 数据显示准确
- [ ] 上传成功率 100%
- [ ] 状态管理正确

### 性能

- [ ] 启动时间 < 5s
- [ ] 内存占用 < 200MB
- [ ] 响应时间 < 3s
- [ ] CPU 占用合理

### 兼容性

- [ ] macOS 10.13+
- [ ] Windows 7+
- [ ] Linux (Ubuntu 18.04+)
- [ ] Chrome/Safari/Edge 浏览器

---

## 📝 测试报告模板

```
# Tauri 应用测试报告

**测试日期**: 2025-10-24
**测试人员**: [姓名]
**应用版本**: v0.1.0
**操作系统**: [OS]

## 测试结果

### 通过 ✅
- 登录功能
- 项目查询
- 文件上传

### 失败 ❌
(无)

### 待解决问题
(无)

## 性能指标

- 启动时间: 2.5s
- 内存占用: 85MB
- 响应时间: 1.2s

## 建议

1. ...
2. ...
3. ...

---
**签名**: ________
**日期**: 2025-10-24
```

---

## 🔍 调试技巧

### 查看浏览器控制台

```javascript
// 按 F12 打开开发者工具
// Console 标签查看错误
console.log("Debug:", state);
```

### 查看网络请求

```
Network 标签
- 查看所有 API 请求
- 检查响应状态码
- 查看响应内容
```

### 查看后端日志

```bash
# println! 输出显示在开发窗口
```

---

## ✅ 测试完成清单

- [ ] 所有功能已测试
- [ ] 所有测试用例已执行
- [ ] 所有错误已处理
- [ ] 性能指标达标
- [ ] UI/UX 验证通过
- [ ] 跨平台兼容性确认
- [ ] 测试报告已完成
- [ ] 问题已提交到 Issue

---

## 📞 问题报告

如发现问题，请记录:

1. **问题描述**: 清晰描述问题
2. **复现步骤**: 详细的操作步骤
3. **预期结果**: 应该发生什么
4. **实际结果**: 实际发生什么
5. **系统环息**: OS、浏览器版本等
6. **截图/日志**: 相关的截图或日志

---

**测试指南版本**: v1.0  
**最后更新**: 2025-10-24

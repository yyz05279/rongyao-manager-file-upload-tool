# 熔盐管理文件上传工具 - 项目结构说明

本项目包含两个独立的应用实现：**Tauri 版本（现代化 Web 技术栈）** 和 **Python 版本（PyQt 桌面应用）**

---

## 📁 项目根目录结构

```
熔盐管理文件上传工具/
├── tauri-app/              # Tauri 版本应用（推荐使用）
├── python-app/             # Python 版本应用
├── docs/                   # 项目文档
├── api/                    # API 接口文档
└── assets/                 # 测试资源文件
```

---

## 🚀 Tauri 版本应用

### 目录结构

```
tauri-app/
├── src/                           # 前端源代码（React）
│   ├── main.jsx                   # React应用入口
│   ├── App.jsx                    # 主应用组件
│   ├── App.css                    # 主应用样式
│   ├── index.css                  # 全局样式
│   │
│   ├── components/                # React组件
│   │   ├── LoginForm.jsx          # 登录表单组件
│   │   ├── LoginForm.css          # 登录表单样式
│   │   ├── UploadForm.jsx         # 上传表单组件
│   │   ├── UploadForm.css         # 上传表单样式
│   │   ├── PreviewDialog.jsx      # 数据预览对话框
│   │   ├── PreviewDialog.css      # 预览对话框样式
│   │   ├── DetailDialog.jsx       # 详情对话框
│   │   └── DetailDialog.css       # 详情对话框样式
│   │
│   ├── services/                  # 前端服务
│   │   └── api.js                 # API接口封装
│   │
│   └── stores/                    # 状态管理
│       └── authStore.js           # 认证状态管理（Zustand）
│
├── src-tauri/                     # Tauri后端（Rust）
│   ├── src/                       # Rust源代码
│   │   ├── main.rs                # Rust主入口
│   │   ├── api/                   # API模块
│   │   │   ├── mod.rs             # API模块入口
│   │   │   ├── auth.rs            # 认证API
│   │   │   ├── project.rs         # 项目API
│   │   │   └── upload.rs          # 上传API
│   │   │
│   │   ├── commands/              # Tauri命令
│   │   │   ├── mod.rs             # 命令模块入口
│   │   │   ├── auth_commands.rs   # 认证相关命令
│   │   │   ├── project_commands.rs # 项目相关命令
│   │   │   └── upload_commands.rs  # 上传相关命令
│   │   │
│   │   └── utils/                 # 工具函数
│   │       ├── mod.rs             # 工具模块入口
│   │       ├── excel.rs           # Excel解析
│   │       └── http.rs            # HTTP客户端
│   │
│   ├── capabilities/              # Tauri权限配置
│   │   └── default.json           # 默认权限配置
│   │
│   ├── icons/                     # 应用图标
│   │   └── icon.png               # 主图标
│   │
│   ├── gen/                       # 自动生成的文件
│   │   └── schemas/               # 架构文件
│   │
│   ├── Cargo.toml                 # Rust依赖配置
│   ├── Cargo.lock                 # Rust依赖锁定
│   ├── build.rs                   # Rust构建脚本
│   └── tauri.conf.json            # Tauri配置文件
│
├── node_modules/                  # Node.js依赖（自动生成）
├── package.json                   # Node.js依赖配置
├── package-lock.json              # Node.js依赖锁定
├── vite.config.js                 # Vite构建配置
└── index.html                     # HTML入口
```

### 启动方式

```bash
# 开发模式
cd tauri-app
npm install
npm run tauri dev

# 构建应用
npm run tauri build
```

### 技术栈

- **前端**: React 18 + Vite
- **后端**: Rust + Tauri 2.x
- **状态管理**: Zustand
- **HTTP 客户端**: Axios（前端）+ reqwest（Rust）
- **Excel 解析**: calamine（Rust）

---

## 🐍 Python 版本应用

### 目录结构

```
python-app/                        # Python 版本应用目录
├── main.py                        # Python 应用入口
│
├── ui/                            # PyQt 界面层
│   ├── __init__.py                # 包初始化
│   ├── main_window.py             # 主窗口
│   ├── login_widget.py            # 登录界面
│   ├── upload_widget.py           # 上传界面
│   ├── daily_report_detail_dialog.py  # 日报详情对话框
│   └── image/                     # 界面图片资源
│       └── daily_report_detail_dialog/
│
├── services/                      # 服务层（业务逻辑）
│   ├── __init__.py                # 包初始化
│   ├── app_state.py               # 应用全局状态
│   ├── auth_service.py            # 认证服务
│   ├── base_service.py            # 基础服务类
│   ├── config_service.py          # 配置服务
│   ├── project_service.py         # 项目服务
│   └── upload_service.py          # 上传服务
│
├── parse_daily_report_excel.py    # Excel 解析工具
├── convert_to_api_format.py       # 数据格式转换工具
│
├── requirements.txt               # Python 依赖
├── 熔盐管理文件上传工具.spec       # PyInstaller 打包配置
│
├── run_macos.sh                   # macOS 运行脚本
├── build_macos.sh                 # macOS 打包脚本
├── build_macos_debug.sh           # macOS 调试打包脚本
├── build_windows.bat              # Windows 打包脚本
├── install.sh                     # macOS 依赖安装脚本
├── install.bat                    # Windows 依赖安装脚本
│
├── build/                         # 构建临时文件（自动生成）
│   └── 熔盐管理文件上传工具/
│
└── dist/                          # 打包输出目录（自动生成）
    ├── 熔盐管理文件上传工具         # macOS 可执行文件
    └── 熔盐管理文件上传工具.app/    # macOS 应用包
```

### 启动方式

```bash
# 进入 Python 应用目录
cd python-app

# 开发模式
python main.py

# 或使用启动脚本
./run_macos.sh        # macOS
```

### 打包脚本

```
build_macos.sh           # macOS打包脚本
build_macos_debug.sh     # macOS调试打包
build_windows.bat        # Windows打包脚本
install.sh              # macOS依赖安装
install.bat             # Windows依赖安装
```

### 技术栈

- **界面框架**: PyQt5
- **HTTP 客户端**: requests
- **Excel 解析**: openpyxl + pandas
- **打包工具**: PyInstaller

---

## 📚 共享资源

### API 文档

```
api/
├── 01-用户认证模块API.md          # 登录、Token刷新等接口
└── 19-项目日报批量导入API.md      # 日报上传接口
```

### 配置文件

```
API_URL_CONFIG.md                  # API地址配置说明
```

### 测试资源

```
assets/
└── 淮安日报2025.10.19.xlsx        # 测试用Excel文件
```

### 项目文档

```
docs/
├── 快速开始.md                    # 快速入门指南
├── 项目架构说明.md                # 架构设计文档
├── 项目说明.md                    # 项目概述
├── 项目总结.md                    # 项目总结
│
├── Tauri迁移方案.md               # Tauri迁移文档
├── TAURI_DEVELOPMENT_GUIDE.md     # Tauri开发指南
├── TAURI_DEPLOYMENT_GUIDE.md      # Tauri部署指南
├── TAURI_TESTING_GUIDE.md         # Tauri测试指南
│
├── Windows打包完整指南.md         # Windows打包文档
├── macOS打包完成总结.md           # macOS打包总结
├── 跨平台打包指南.md              # 跨平台打包说明
│
├── Token管理和无感刷新实现说明.md  # Token机制
├── 全局Token管理说明.md           # Token管理
├── 用户登录缓存功能说明.md         # 登录缓存
├── 记住密码功能说明.md             # 记住密码
│
├── 数据预览功能说明.md             # 预览功能
├── 日报详情弹窗实现说明.md         # 详情对话框
├── 批量上传勾选功能说明.md         # 批量上传
├── 数据分组展示优化说明.md         # 数据分组
│
├── API配置说明.md                 # API配置
├── API字段映射修改说明.md         # 字段映射
├── API错误处理优化说明.md         # 错误处理
├── API调试输出说明.md             # 调试日志
│
└── 界面优化说明.md                # UI优化文档
```

### 根目录文档

```
README_TAURI.md                    # Tauri版本说明
QUICK_START.md                     # 快速开始
PROJECT_SUMMARY.md                 # 项目摘要
FINAL_REPORT.md                    # 最终报告
INDEX.md                           # 文档索引
CHECKLIST.md                       # 检查清单
```

---

## 🔄 版本对比

| 特性         | Tauri 版本                      | Python 版本               |
| ------------ | ------------------------------- | ------------------------- |
| **性能**     | ⭐⭐⭐⭐⭐ 快速启动，低内存占用 | ⭐⭐⭐ 需要 Python 运行时 |
| **体积**     | ⭐⭐⭐⭐⭐ ~5MB                 | ⭐⭐ ~50MB+               |
| **界面**     | ⭐⭐⭐⭐⭐ 现代化 Web 界面      | ⭐⭐⭐ 原生桌面界面       |
| **跨平台**   | ⭐⭐⭐⭐⭐ Windows/macOS/Linux  | ⭐⭐⭐⭐ Windows/macOS    |
| **开发效率** | ⭐⭐⭐⭐ React 组件化           | ⭐⭐⭐ PyQt 界面设计      |
| **维护性**   | ⭐⭐⭐⭐⭐ TypeScript 类型安全  | ⭐⭐⭐ 动态类型           |
| **安全性**   | ⭐⭐⭐⭐⭐ Rust 安全保证        | ⭐⭐⭐⭐ Python 成熟生态  |

**推荐使用**: Tauri 版本（更现代化、性能更好、体积更小）

---

## 📋 开发工作流

### Tauri 开发

```bash
# 1. 进入Tauri目录
cd tauri-app

# 2. 安装依赖（首次）
npm install
cd src-tauri
cargo build
cd ..

# 3. 启动开发服务器
npm run tauri dev

# 4. 构建生产版本
npm run tauri build
```

### Python 开发

```bash
# 1. 安装依赖（首次）
pip install -r requirements.txt

# 2. 运行应用
python main.py

# 3. 打包应用
./build_macos.sh          # macOS
./build_windows.bat       # Windows
```

---

## 🗂️ 推荐的 Git 忽略文件

详见 `GITIGNORE_CONFIG.md`

---

## 📝 注意事项

1. **Tauri 版本**是当前主要维护的版本，推荐使用
2. **Python 版本**作为备份方案，适合纯 Python 环境
3. 两个版本**共享相同的 API 接口**和业务逻辑
4. `services/` 目录中的服务层代码可以在 Python 版本中复用
5. 所有文档位于 `docs/` 目录，按功能分类
6. API 文档位于 `api/` 目录，包含详细的接口说明

---

## 🎯 下一步开发建议

### Tauri 版本

- [ ] 添加自动更新功能
- [ ] 优化 Excel 解析性能
- [ ] 添加离线数据缓存
- [ ] 实现多语言支持
- [ ] 添加单元测试

### Python 版本

- [ ] 保持与 Tauri 版本功能同步
- [ ] 优化打包体积
- [ ] 改进错误日志

---

**最后更新**: 2025 年 10 月 26 日
**维护者**: 熔盐管理项目团队

# 🖥️ 跨平台打包指南

> 根据你的操作系统选择合适的打包方式

## 🤔 我应该选择哪个文档？

### 📍 我在 macOS 上开发

**生成 macOS 可执行文件：**
```bash
chmod +x build_macos.sh
./build_macos.sh
```
👉 查看：[macOS打包完成总结.md](./macOS打包完成总结.md)

**生成 Windows .exe 文件：**
- ❌ 不能在 macOS 上直接打包 Windows 版本
- ✅ 需要借助虚拟机或远程 Windows 机器
- 👉 查看：[Windows打包完整指南.md](./Windows打包完整指南.md)

---

### 📍 我在 Windows 上开发

**生成 Windows .exe 文件：**
```bash
# 方式1：双击运行
build_windows.bat

# 方式2：命令行执行
pip install -r requirements.txt
pyinstaller --onefile --windowed --name="熔盐管理文件上传工具" main.py
```
👉 查看：[Windows打包快速参考.md](./Windows打包快速参考.md)

**生成 macOS 可执行文件：**
- ❌ 不能在 Windows 上直接打包 macOS 版本
- ✅ 需要借助虚拟机或远程 macOS 机器
- 👉 查看：[macOS打包完成总结.md](./macOS打包完成总结.md)

---

### 📍 我在 Linux 上开发

**生成 Linux 可执行文件：**
```bash
pip install -r requirements.txt
pyinstaller --oneline --windowed --name="熔盐管理文件上传工具" main.py
```

**生成其他平台可执行文件：**
- ❌ 不能在 Linux 上直接打包其他平台版本
- ✅ 需要跨平台编译工具或虚拟机

---

## 📊 打包对应关系表

| 当前系统 | 能直接打包 | 无法直接打包 | 解决方案 |
|--------|----------|-----------|--------|
| **Windows** | .exe (Windows) | .app (macOS)<br>.bin (Linux) | 虚拟机/远程macOS或Linux |
| **macOS** | .app (macOS)<br>.bin (Unix) | .exe (Windows) | 虚拟机/远程Windows |
| **Linux** | .bin (Linux) | .exe (Windows)<br>.app (macOS) | 虚拟机/远程Windows或macOS |

---

## ⚡ 快速判断流程

```
我想打包成什么？
├─ .exe (Windows 可执行文件)
│  └─ 我现在在哪个系统？
│     ├─ Windows → 直接打包 (build_windows.bat)
│     ├─ macOS → 需要虚拟机/远程Windows
│     └─ Linux → 需要虚拟机/远程Windows
│
├─ .app (macOS 应用)
│  └─ 我现在在哪个系统？
│     ├─ macOS → 直接打包 (build_macos.sh)
│     ├─ Windows → 需要虚拟机/远程macOS
│     └─ Linux → 需要虚拟机/远程macOS
│
└─ .bin (Linux 可执行文件)
   └─ 我现在在哪个系统？
      ├─ Linux → 直接打包 (PyInstaller)
      ├─ Windows → 需要虚拟机/远程Linux
      └─ macOS → 需要虚拟机/远程Linux
```

---

## 🔍 我的当前情况是什么？

### 症状 1：双击 build_windows.bat 出错或无反应
- 📌 原因：你不在 Windows 系统上
- ✅ 解决：切换到 Windows 系统或使用虚拟机

### 症状 2：打包后找不到 .exe 文件
- 📌 原因：你在 macOS 或 Linux 上，生成的不是 .exe
- ✅ 查看 dist 文件夹中的文件类型
- ✅ 检查文件大小（通常 > 50MB）

### 症状 3：运行 pyinstaller 后生成的是可执行文件但不是 .exe
- 📌 原因：PyInstaller 生成的是当前系统的格式
- ✅ 查看文件：
  - macOS：无扩展名，可直接执行
  - Windows：.exe 扩展名
  - Linux：无扩展名

---

## 📂 文档速查

### Windows 打包
- [Windows打包快速参考.md](./Windows打包快速参考.md) - 快速上手
- [Windows打包完整指南.md](./Windows打包完整指南.md) - 详细教程
- [打包流程总结.md](./打包流程总结.md) - 理解原理

### macOS 打包
- [macOS打包完成总结.md](./macOS打包完成总结.md) - 打包说明
- [build_macos.sh](../build_macos.sh) - 打包脚本

### 一般问题
- [快速修复指南.md](./快速修复指南.md) - 问题解决
- [调试说明.md](./调试说明.md) - 调试方法

---

## 🎯 推荐工作流

### 场景1：在 macOS 上开发，生成 macOS 版本
```
1. 在 macOS 上开发和测试代码
2. 运行 ./build_macos.sh 生成 macOS 可执行文件
3. 测试生成的 .app 或可执行文件
4. 分发给 macOS 用户
```

### 场景2：在 Windows 上开发，生成 Windows 版本
```
1. 在 Windows 上开发和测试代码
2. 双击 build_windows.bat 或运行命令
3. 测试生成的 .exe 文件
4. 分发给 Windows 用户
```

### 场景3：在 macOS 上开发，生成 Windows 版本
```
1. 在 macOS 上开发和测试代码
2. 使用虚拟机（VirtualBox/Parallels）启动 Windows
3. 在虚拟机中运行 build_windows.bat
4. 获取生成的 .exe 文件
5. 分发给 Windows 用户
```

---

## 🛠️ 虚拟机方案

如果需要在 macOS 上生成 Windows 版本，可使用：

### 方案 1：Parallels Desktop（推荐，付费）
- 性能好
- 与 macOS 集成深
- 支持共享文件夹

### 方案 2：VirtualBox（免费）
- 功能完整
- 跨平台
- 性能略低

### 方案 3：UTM（免费，Apple Silicon）
- 专为 Apple Silicon 优化
- 性能好

### 方案 4：GitHub Actions（云端，免费）
- 无需本地虚拟机
- 需要配置工作流文件

---

## ✅ 检查清单

打包前检查：
- [ ] 确认你的操作系统
- [ ] 确认想要的输出格式（.exe / .app / .bin）
- [ ] 确认相关依赖已安装
- [ ] 确认源代码可以正常运行

打包后检查：
- [ ] 找到输出文件
- [ ] 验证文件大小（> 50MB 通常正常）
- [ ] 检查文件类型是否正确
- [ ] 在目标系统上测试运行

---

## 📞 获取帮助

- **Windows 打包问题** → 查看 [Windows打包快速参考.md](./Windows打包快速参考.md)
- **macOS 打包问题** → 查看 [macOS打包完成总结.md](./macOS打包完成总结.md)
- **一般问题** → 查看 [快速修复指南.md](./快速修复指南.md)
- **打包失败** → 查看 [调试说明.md](./调试说明.md)

---

**最后更新**: 2025年10月24日
